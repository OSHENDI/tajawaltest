document.addEventListener('DOMContentLoaded', function () { initMobileMenu(); initCarousel(); initSmoothScroll(); initHeaderScroll(); initProductCards(); initCompareButtons(); initScrollSpy() }); function initMobileMenu() { const b = document.querySelector('.mobile-menu-btn'), n = document.querySelector('.nav'); if (b && n) { b.addEventListener('click', function () { n.classList.toggle('active'); const i = this.querySelector('i'); if (i) { i.classList.toggle('fa-bars'); i.classList.toggle('fa-times') } }); document.addEventListener('click', function (e) { if (!n.contains(e.target) && !b.contains(e.target)) { n.classList.remove('active'); const i = b.querySelector('i'); if (i) { i.classList.add('fa-bars'); i.classList.remove('fa-times') } } }); const l = n.querySelectorAll('.nav-link'); l.forEach(link => { link.addEventListener('click', function () { n.classList.remove('active') }) }) } } function initCarousel() { const c = document.querySelectorAll('.carousel-container'); c.forEach(container => { const r = container.querySelector('.carousel'), p = container.querySelector('.carousel-btn.prev'), n = container.querySelector('.carousel-btn.next'); if (r && p && n) { const s = 300; p.addEventListener('click', function () { r.scrollBy({ left: s, behavior: 'smooth' }) }); n.addEventListener('click', function () { r.scrollBy({ left: -s, behavior: 'smooth' }) }) } }) } function initSmoothScroll() { const l = document.querySelectorAll('a[href^="#"]'); l.forEach(link => { link.addEventListener('click', function (e) { const h = this.getAttribute('href'); if (h !== '#' && h.startsWith('#')) { e.preventDefault(); const t = document.querySelector(h); if (t) { const r = document.querySelector('.header'), hH = r ? r.offsetHeight : 0, sh = 30, tP = t.getBoundingClientRect().top + window.pageYOffset, sP = tP - hH - sh; window.scrollTo({ top: sP, behavior: 'smooth' }) } } }) }) } function initHeaderScroll() { const h = document.querySelector('.header'); if (h) { window.addEventListener('scroll', function () { if (window.pageYOffset > 100) { h.classList.add('scrolled') } else { h.classList.remove('scrolled') } }) } } function initProductCards() { const w = document.querySelectorAll('.btn-wishlist'); w.forEach(btn => { btn.addEventListener('click', function (e) { e.preventDefault(); this.classList.toggle('active'); const i = this.querySelector('i'); const isActive = this.classList.contains('active'); if (i) { i.classList.toggle('far'); i.classList.toggle('fas') } if (isActive) { this.style.color = '#FF5722'; this.style.borderColor = '#FF5722' } else { this.style.color = ''; this.style.borderColor = '' } updateWishlistBadge(isActive) }) }); const a = document.querySelectorAll('.btn-add-cart'); a.forEach(btn => { btn.addEventListener('click', function (e) { e.preventDefault(); const oT = this.innerHTML; this.innerHTML = '<i class="fas fa-check"></i> تمت الإضافة'; this.style.backgroundColor = '#45a049'; setTimeout(() => { this.innerHTML = oT; this.style.backgroundColor = '' }, 2000); updateCartBadge() }) }) } function initCompareButtons() { const c = document.querySelectorAll('.btn-compare'); c.forEach(btn => { btn.addEventListener('click', function (e) { e.preventDefault(); this.classList.toggle('active'); const active = this.classList.contains('active'); updateCompareBadge(active) }) }) } function updateWishlistBadge(isActive) { const b = document.querySelectorAll('.header-action-btn .badge')[0]; if (b) { let c = parseInt(b.textContent) || 0; if (isActive) c++; else if (c > 0) c--; b.textContent = c; b.style.transform = 'scale(1.3)'; setTimeout(() => { b.style.transform = '' }, 200) } } function updateCompareBadge(isActive) { const b = document.querySelectorAll('.header-action-btn .badge')[1]; if (b) { let c = parseInt(b.textContent) || 0; if (isActive) c++; else if (c > 0) c--; b.textContent = c; b.style.transform = 'scale(1.3)'; setTimeout(() => { b.style.transform = '' }, 200) } } function updateCartBadge() { const b = document.querySelectorAll('.header-action-btn .badge')[2]; if (b) { let c = parseInt(b.textContent) || 0; c++; b.textContent = c; b.style.transform = 'scale(1.3)'; setTimeout(() => { b.style.transform = '' }, 200) } } function initScrollSpy() { const s = document.querySelectorAll('section[id], footer[id]'), n = document.querySelectorAll('.nav-link'); window.addEventListener('scroll', () => { let c = ''; const sP = window.pageYOffset + 150; s.forEach(sec => { const t = sec.offsetTop, h = sec.offsetHeight; if (sP >= t && sP < t + h) { c = sec.getAttribute('id') } }); n.forEach(link => { link.classList.remove('active'); if (link.getAttribute('href') === `#${c}`) { link.classList.add('active') } }) }) } document.addEventListener('DOMContentLoaded', function () { const n = document.querySelector('.newsletter-form'); if (n) { n.addEventListener('submit', function (e) { e.preventDefault(); const i = this.querySelector('input[type="email"]'), b = this.querySelector('button'); if (i && i.value) { const oT = b.textContent; b.textContent = 'تم الاشتراك!'; b.style.backgroundColor = '#45a049'; i.value = ''; setTimeout(() => { b.textContent = oT; b.style.backgroundColor = '' }, 3000) } }) } const s = document.querySelector('.search-bar'); if (s) { const i = s.querySelector('input'), b = s.querySelector('button'); if (b) { b.addEventListener('click', function (e) { e.preventDefault(); if (i && i.value.trim()) { console.log('Searching for:', i.value) } }) } if (i) { i.addEventListener('keypress', function (e) { if (e.key === 'Enter') { e.preventDefault(); if (this.value.trim()) { console.log('Searching for:', this.value) } } }) } } });
